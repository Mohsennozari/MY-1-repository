<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>چغندر‌یار: راهنمای کهکشانی ارقام چغندر قند ایران</title>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Google Fonts: Orbitron -->
     <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
  
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
     * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Orbitron', sans-serif;
    background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 100%);
    color: #e0e0ff;
    text-align: right;
    padding: 20px;
    overflow-x: hidden;
    position: relative;
    perspective: 1200px;
}

/* لایه پس‌زمینه اصلی (ستاره‌های بزرگ و درخشان) */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="1000"><circle cx="5" cy="5" r="2" fill="rgba(255,255,255,0.4)"/><circle cx="15" cy="15" r="3" fill="rgba(0,240,255,0.5)"/><polygon points="25,23 27,25 25,27 23,25" fill="rgba(212,0,255,0.5)"/></svg>') repeat;
    animation: starryBackground 80s linear infinite;
    z-index: -3;
    filter: blur(1px);
}

@keyframes starryBackground {
    0% { background-position: 0 0; }
    100% { background-position: 1000px 1000px; }
}

/* لایه ذرات کهکشانی (ستاره‌ها و جرقه‌های متنوع با حرکات تصادفی) */
body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><circle cx="50" cy="50" r="2" fill="rgba(0,240,255,0.7)"/><circle cx="150" cy="150" r="3" fill="rgba(255,255,255,0.8)"/><polygon points="100,98 102,100 100,102 98,100" fill="rgba(212,0,255,0.6)"/><polygon points="75,73 77,75 75,77 73,75" fill="rgba(255,102,255,0.7)"/></svg>') repeat;
    animation: particleGalaxy 30s ease-in-out infinite;
    opacity: 0.85;
    z-index: -2;
    transition: transform 0.2s;
    filter: blur(0.5px) brightness(1.2);
    box-shadow: 0 0 20px rgba(0, 240, 255, 0.3);
}

/* انیمیشن کهکشانی با حرکات تصادفی */
@keyframes particleGalaxy {
    0% {
        background-position: 0 0;
        transform: translate(0, 0) scale(1) rotate(0deg);
    }
    25% {
        background-position: 100px 100px;
        transform: translate(-20px, 30px) scale(1.05) rotate(5deg);
    }
    50% {
        background-position: 200px 200px;
        transform: translate(30px, -20px) scale(1.1) rotate(-3deg);
    }
    75% {
        background-position: 300px 300px;
        transform: translate(-10px, 20px) scale(1.05) rotate(2deg);
    }
    100% {
        background-position: 400px 400px;
        transform: translate(0, 0) scale(1) rotate(0deg);
    }
}

/* واکنش به اسکرول (پارالاکس) */
body.scrolling::after {
    transform: translateY(calc(var(--scrollY) * -0.3px)) scale(1.05);
}

/* واکنش به حرکت موس */
body.mouse-moving::after {
    transform: translate(calc(var(--mouseX) * 0.03px), calc(var(--mouseY) * 0.03px)) scale(1.05);
}

/* استایل‌های دیگر (برای سازگاری با استایل‌های قبلی) */
.container {
    max-width: 1200px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
}

h1 {
    color: #00f0ff;
    text-align: center;
    margin-bottom: 20px;
    text-shadow: 0 0 12px #00f0ff, 0 0 24px #00f0ff, 0 0 36px #00f0ff;
    animation: glowPulse 2.2s ease-in-out infinite;
    transform: translateZ(30px);
}

@keyframes glowPulse {
    0%, 100% { text-shadow: 0 0 12px #00f0ff, 0 0 24px #00f0ff, 0 0 36px #00f0ff; }
    50% { text-shadow: 0 0 20px #00f0ff, 0 0 40px #00f0ff, 0 0 60px #00f0ff; }
}

h2 {
    color: #d400ff;
    margin-bottom: 15px;
    text-shadow: 0 0 10px #d400ff;
    transform: translateZ(15px);
}

.filter-section, .consultation-section, .education-section, .chart-container {
    background: rgba(20, 20, 50, 0.9);
    padding: 20px;
    border-radius: 14px;
    margin-bottom: 20px;
    box-shadow: 0 10px 25px rgba(0, 240, 255, 0.5), 0 0 40px rgba(212, 0, 255, 0.4);
    border: 1px solid #00f0ff;
    transform: translateZ(20px);
    animation: sectionFloat 5s ease-in-out infinite;
}

@keyframes sectionFloat {
    0%, 100% { transform: translateY(0) translateZ(20px); }
    50% { transform: translateY(-12px) translateZ(20px); }
}

.filter-section select, .consultation-section input, .consultation-section select {
    padding: 10px;
    margin: 5px;
    border-radius: 10px;
    border: 1px solid #00f0ff;
    background: rgba(26, 26, 58, 0.95);
    color: #e0e0ff;
    width: 180px;
    font-size: 14px;
    transition: box-shadow 0.3s, transform 0.3s;
    transform: translateZ(8px);
}

.filter-section select:focus, .consultation-section input:focus, .consultation-section select:focus {
    box-shadow: 0 0 18px #00f0ff, 0 0 30px #00f0ff;
    outline: none;
    transform: translateZ(12px) scale(1.05);
}

.filter-section button, .consultation-section button, .education-section button, .chart-buttons button {
    padding: 10px 20px;
    margin: 5px;
    border: none;
    border-radius: 10px;
    background: linear-gradient(45deg, #00f0ff, #d400ff, #ff66ff);
    color: #fff;
    cursor: pointer;
    font-family: 'Orbitron', sans-serif;
    transition: transform 0.3s, box-shadow 0.3s;
    box-shadow: 0 0 18px rgba(0, 240, 255, 0.7), 0 0 30px rgba(212, 0, 255, 0.5);
    transform: translateZ(12px);
    position: relative;
    overflow: hidden;
}

.filter-section button:hover, .consultation-section button:hover, .education-section button:hover, .chart-buttons button:hover {
    transform: translateZ(18px) scale(1.1);
    box-shadow: 0 0 30px rgba(0, 240, 255, 0.9), 0 0 50px rgba(212, 0, 255, 0.8);
}

.filter-section button::before, .consultation-section button::before, .education-section button::before, .chart-buttons button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.4) 0%, transparent 70%);
    transform: translate(-50%, -50%) rotate(45deg);
    transition: transform 0.5s;
    z-index: -1;
}

.filter-section button:hover::before, .consultation-section button:hover::before, .education-section button:hover::before, .chart-buttons button:hover::before {
    transform: translate(-50%, -50%) rotate(90deg);
}

.filter-section button i, .consultation-section button i, .education-section button i, .chart-buttons button i {
    margin-left: 5px;
    animation: iconPulse 1.8s infinite;
}

@keyframes iconPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.3); }
}

.results {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
}

.card {
    background: rgba(20, 20, 50, 0.95);
    padding: 15px;
    border-radius: 12px;
    box-shadow: 0 12px 30px rgba(0, 240, 255, 0.6), 0 0 50px rgba(212, 0, 255, 0.5);
    border: 1px solid #d400ff;
    transition: transform 0.4s, box-shadow 0.4s;
    cursor: pointer;
    display: flex;
    align-items: center;
    transform: translateZ(25px) rotateX(8deg);
    animation: cardFloat 4.5s ease-in-out infinite;
    position: relative;
    overflow: hidden;
}

.card:hover {
    transform: translateZ(35px) translateY(-15px) rotateX(0deg);
    box-shadow: 0 20px 50px rgba(0, 240, 255, 0.9), 0 0 70px rgba(212, 0, 255, 0.8);
}

@keyframes cardFloat {
    0%, 100% { transform: translateZ(25px) translateY(0) rotateX(8deg); }
    50% { transform: translateZ(25px) translateY(-12px) rotateX(8deg); }
}

.card i.fa-seedling {
    font-size: 26px;
    color: #00f0ff;
    margin-left: 10px;
    text-shadow: 0 0 10px #00f0ff;
    animation: beetSpin 3.5s linear infinite;
}

@keyframes beetSpin {
    0% { transform: rotate(0deg) scale(1); }
    50% { transform: rotate(180deg) scale(1.3); }
    100% { transform: rotate(360deg) scale(1); }
}

.card::before {
    content: '\f4ce';
    font-family: 'Font Awesome 6 Free';
    font-weight: 900;
    position: absolute;
    top: 15%;
    left: 15%;
    font-size: 50px;
    color: rgba(0, 240, 255, 0.25);
    animation: beetFloat 7s ease-in-out infinite;
    z-index: -1;
}

@keyframes beetFloat {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(25px) rotate(20deg); }
}

.chart-container canvas {
    max-width: 100%;
    margin: 10px 0;
    display: none;
    border: 1px solid #00f0ff;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0, 240, 255, 0.5);
    transform: translateZ(15px);
    background: rgba(20, 20, 50, 0.95);
}

#consultationResult, #educationContent {
    margin-top: 20px;
    padding: 15px;
    background: rgba(30, 30, 60, 0.95);
    border-radius: 10px;
    border: 1px solid #d400ff;
    box-shadow: 0 10px 25px rgba(212, 0, 255, 0.5);
    transform: translateZ(12px);
    animation: contentPulse 8s ease-in-out infinite;
}

@keyframes contentPulse {
    0%, 100% { transform: translateZ(12px) scale(1); }
    50% { transform: translateZ(12px) scale(1.03); }
}

.tooltip {
    position: relative;
    display: inline-block;
}

.tooltip .tooltiptext {
    visibility: hidden;
    width: 220px;
    background: rgba(20, 20, 50, 0.95);
    color: #e0e0ff;
    text-align: center;
    border-radius: 10px;
    padding: 10px;
    position: absolute;
    z-index: 1;
    bottom: 130%;
    right: 50%;
    margin-right: -110px;
    border: 1px solid #00f0ff;
    box-shadow: 0 10px 25px rgba(0, 240, 255, 0.5);
    opacity: 0;
    transition: opacity 0.3s, transform 0.3s;
    transform: translateZ(8px);
}

.tooltip:hover .tooltiptext {
    visibility: visible;
    opacity: 1;
    transform: translateZ(12px) translateY(-8px);
}

.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(10, 10, 26, 0.9);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    perspective: 1200px;
}

.modal-content {
    background: rgba(20, 20, 50, 0.98);
    padding: 20px;
    border-radius: 14px;
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    border: 1px solid #00f0ff;
    box-shadow: 0 12px 35px rgba(0, 240, 255, 0.7), 0 0 50px rgba(212, 0, 255, 0.6);
    color: #e0e0ff;
    transform: translateZ(40px) rotateX(12deg);
    animation: modalPop 0.6s ease-out forwards;
}

@keyframes modalPop {
    from { transform: translateZ(0) rotateX(25deg); opacity: 0; }
    to { transform: translateZ(40px) rotateX(0deg); opacity: 1; }
}

.modal-content h3 {
    color: #00f0ff;
    text-shadow: 0 0 10px #00f0ff;
    transform: translateZ(15px);
}

.close-modal {
    position: absolute;
    top: 10px;
    left: 10px;
    font-size: 26px;
    color: #d400ff;
    cursor: pointer;
    text-shadow: 0 0 10px #d400ff;
    transition: color 0.3s, transform 0.3s;
    transform: translateZ(8px);
}

.close-modal:hover {
    color: #ff66ff;
    text-shadow: 0 0 15px #ff66ff;
    transform: translateZ(12px) rotate(90deg);
}

@media (max-width: 768px) {
    .filter-section select, .consultation-section input, .consultation-section select {
        width: 100%;
        margin: 5px 0;
    }
    .filter-section button, .consultation-section button, .education-section button, .chart-buttons button {
        width: 100%;
        margin: 5px 0;
    }
    .card {
        transform: translateZ(20px) rotateX(8deg);
    }
    .card:hover {
        transform: translateZ(25px) translateY(-10px) rotateX(0deg);
    }
    body::after {
        animation-duration: 40s; /* کندتر برای موبایل */
    }
}
    </style>
</head>
<body>
    <div class="container">
        <h1>چغندر‌یار: راهنمای کهکشانی ارقام چغندر قند ایران</h1>

        <!-- بخش فیلترها -->
        <div class="filter-section">
            <h2>فیلتر ارقام چغندر قند</h2>
            <div class="tooltip">
                <select id="waterNeed">
                    <option value="">نیاز آبی</option>
                    <option value="low">کم (زیر 6000 مترمکعب)</option>
                    <option value="medium">متوسط (6000-8000 مترمکعب)</option>
                    <option value="high">زیاد (بیش از 8000 مترمکعب)</option>
                </select>
                <span class="tooltiptext">نیاز آبی در مترمکعب/هکتار</span>
            </div>
            <div class="tooltip">
                <select id="yield">
                    <option value="">محصول در هکتار</option>
                    <option value="low">کم (زیر 50 تن)</option>
                    <option value="medium">متوسط (50-65 تن)</option>
                    <option value="high">زیاد (بیش از 65 تن)</option>
                </select>
                <span class="tooltiptext">محصول در تن/هکتار</span>
            </div>
            <div class="tooltip">
                <select id="type">
                    <option value="">نوع رقم</option>
                    <option value="local">بومی</option>
                    <option value="improved">اصلاح‌شده</option>
                    <option value="international">بین‌المللی</option>
                </select>
                <span class="tooltiptext">نوع رقم چغندر قند</span>
            </div>
            <div class="tooltip">
                <select id="pestResistance">
                    <option value="">مقاومت به آفات</option>
                    <option value="low">کم (زیر 50%)</option>
                    <option value="medium">متوسط (50-75%)</option>
                    <option value="high">بالا (بیش از 75%)</option>
                </select>
                <span class="tooltiptext">درصد مقاومت به آفات</span>
            </div>
            <div class="tooltip">
                <select id="growthPeriod">
                    <option value="">دوره رشد</option>
                    <option value="early">زودرس (150-180 روز)</option>
                    <option value="late">دیررس (بیش از 180 روز)</option>
                </select>
                <span class="tooltiptext">مدت زمان رشد</span>
            </div>
            <div class="tooltip">
                <select id="climate">
                    <option value="">اقلیم</option>
                    <option value="temperate">معتدل</option>
                    <option value="warm">گرم</option>
                </select>
                <span class="tooltiptext">اقلیم منطقه</span>
            </div>
            <div class="tooltip">
                <select id="soilPh">
                    <option value="">pH خاک</option>
                    <option value="neutral">خنثی (6.5-7.5)</option>
                    <option value="alkaline">قلیایی (بیش از 7.5)</option>
                </select>
                <span class="tooltiptext">pH مناسب خاک</span>
            </div>
            <div class="tooltip">
                <select id="altitude">
                    <option value="">ارتفاع</option>
                    <option value="low">کم (زیر 1000 متر)</option>
                    <option value="medium">متوسط (1000-1500 متر)</option>
                    <option value="high">زیاد (بیش از 1500 متر)</option>
                </select>
                <span class="tooltiptext">ارتفاع از سطح دریا</span>
            </div>
            <div class="tooltip">
                <select id="temperature">
                    <option value="">دمای مطلوب</option>
                    <option value="medium">متوسط (15-20 درجه)</option>
                    <option value="high">بالا (20-25 درجه)</option>
                </select>
                <span class="tooltiptext">دمای میانگین رشد</span>
            </div>
            <button onclick="filterBeet()"><i class="fas fa-filter"></i> فیلتر</button>
            <button onclick="resetFilters()"><i class="fas fa-undo"></i> ریست</button>
            <button onclick="downloadReport()"><i class="fas fa-download"></i> دانلود گزارش</button>
        </div>

        <!-- بخش نتایج -->
        <div id="results" class="results"></div>

        <!-- بخش نمودارها -->
        <div class="chart-container">
            <h2>مقایسه کهکشانی ارقام</h2>
            <div class="chart-buttons">
                <button onclick="toggleChart('yieldChart')"><i class="fas fa-chart-bar"></i> نمایش نمودار محصول</button>
                <button onclick="toggleChart('typeChart')"><i class="fas fa-chart-pie"></i> نمایش نمودار انواع</button>
                <button onclick="toggleChart('radarChart')"><i class="fas fa-chart-line"></i> نمایش نمودار راداری</button>
                <button onclick="showAllCharts()"><i class="fas fa-chalkboard"></i> نمایش همه نمودارها</button>
            </div>
            <canvas id="yieldChart"></canvas>
            <canvas id="typeChart"></canvas>
            <canvas id="radarChart"></canvas>
        </div>

        <!-- بخش مشاوره -->
        <div class="consultation-section">
            <h2>مشاوره کشت فضایی</h2>
            <form id="consultationForm">
                <label>نوع خاک:</label>
                <select id="soilType">
                    <option value="loam">لومی</option>
                    <option value="sandy">شنی</option>
                    <option value="clay">رسی</option>
                </select><br>
                <label>pH خاک:</label>
                <input type="number" id="soilPhInput" step="0.1" placeholder="مثلاً 7.0"><br>
                <label>میزان آب در دسترس:</label>
                <select id="waterAvailability">
                    <option value="irrigated">آبیاری</option>
                    <option value="dry">دیم</option>
                </select><br>
                <label>منطقه جغرافیایی:</label>
                <input type="text" id="region" placeholder="مثلاً خوزستان"><br>
                <label>بودجه (تومان):</label>
                <input type="number" id="budget" placeholder="مثلاً 6000000"><br>
                <label>اقلیم:</label>
                <select id="consultationClimate">
                    <option value="temperate">معتدل</option>
                    <option value="warm">گرم</option>
                </select><br>
                <label>ارتفاع (متر):</label>
                <input type="number" id="altitudeInput" placeholder="مثلاً 500"><br>
                <label>دمای میانگین (درجه):</label>
                <input type="number" id="temperatureInput" placeholder="مثلاً 20"><br>
                <button type="submit"><i class="fas fa-seedling"></i> دریافت مشاوره</button>
            </form>
            <div id="consultationResult"></div>
        </div>

        <!-- بخش آموزشی -->
        <div class="education-section">
            <h2>داده‌های آموزشی کهکشانی</h2>
            <select id="educationVariety">
                <option value="">انتخاب رقم</option>
            </select>
            <button onclick="showEducation()"><i class="fas fa-book"></i> نمایش نکات کشت</button>
            <div id="educationContent"></div>
        </div>

        <!-- مودال جزئیات -->
        <div id="varietyModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeModal()">×</span>
                <div id="modalContent"></div>
            </div>
        </div>
    </div>

    <!-- کتابخانه‌های موردنیاز -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script>
        // داده‌های 20 رقم چغندر قند با اطلاعات جامع
        const beetVarieties = [
            { name: "SBSI006", waterNeed: "high", waterAmount: 9000, yield: "high", yieldAmount: 70, type: "improved", pestResistance: "high", pestResistancePercent: 80, growthPeriod: "late", growthDays: 190, fertilizerNeed: "high", fertilizerAmount: 250, soilType: "loam", soilPh: "neutral", altitude: "low", altitudeRange: 500, temperature: "high", tempRange: 22, climate: "warm", plantingTime: "بهار", successRate: 92, costPerHectare: 6000000, revenuePerTon: 100000 },
            { name: "BR1", waterNeed: "medium", waterAmount: 7000, yield: "medium", yieldAmount: 60, type: "improved", pestResistance: "medium", pestResistancePercent: 65, growthPeriod: "early", growthDays: 170, fertilizerNeed: "medium", fertilizerAmount: 200, soilType: "sandy", soilPh: "neutral", altitude: "medium", altitudeRange: 1200, temperature: "medium", tempRange: 18, climate: "temperate", plantingTime: "بهار", successRate: 88, costPerHectare: 5500000, revenuePerTon: 95000 },
            { name: "Rasoul", waterNeed: "high", waterAmount: 8500, yield: "high", yieldAmount: 68, type: "local", pestResistance: "high", pestResistancePercent: 78, growthPeriod: "late", growthDays: 185, fertilizerNeed: "high", fertilizerAmount: 240, soilType: "loam", soilPh: "neutral", altitude: "low", altitudeRange: 600, temperature: "high", tempRange: 21, climate: "warm", plantingTime: "بهار", successRate: 90, costPerHectare: 5800000, revenuePerTon: 98000 },
            { name: "Shirin", waterNeed: "medium", waterAmount: 6500, yield: "medium", yieldAmount: 58, type: "improved", pestResistance: "medium", pestResistancePercent: 60, growthPeriod: "early", growthDays: 165, fertilizerNeed: "medium", fertilizerAmount: 190, soilType: "sandy", soilPh: "neutral", altitude: "medium", altitudeRange: 1100, temperature: "medium", tempRange: 19, climate: "temperate", plantingTime: "بهار", successRate: 87, costPerHectare: 5300000, revenuePerTon: 92000 },
            { name: "Beta 1", waterNeed: "high", waterAmount: 9200, yield: "high", yieldAmount: 72, type: "international", pestResistance: "high", pestResistancePercent: 82, growthPeriod: "late", growthDays: 195, fertilizerNeed: "high", fertilizerAmount: 260, soilType: "loam", soilPh: "neutral", altitude: "low", altitudeRange: 400, temperature: "high", tempRange: 23, climate: "warm", plantingTime: "بهار", successRate: 93, costPerHectare: 6200000, revenuePerTon: 102000 },
            { name: "Nika", waterNeed: "medium", waterAmount: 6800, yield: "medium", yieldAmount: 62, type: "improved", pestResistance: "medium", pestResistancePercent: 68, growthPeriod: "early", growthDays: 160, fertilizerNeed: "medium", fertilizerAmount: 210, soilType: "sandy", soilPh: "neutral", altitude: "medium", altitudeRange: 1300, temperature: "medium", tempRange: 18, climate: "temperate", plantingTime: "بهار", successRate: 89, costPerHectare: 5400000, revenuePerTon: 96000 },
            { name: "Pars", waterNeed: "high", waterAmount: 8800, yield: "high", yieldAmount: 69, type: "local", pestResistance: "high", pestResistancePercent: 80, growthPeriod: "late", growthDays: 190, fertilizerNeed: "high", fertilizerAmount: 250, soilType: "loam", soilPh: "neutral", altitude: "low", altitudeRange: 500, temperature: "high", tempRange: 22, climate: "warm", plantingTime: "بهار", successRate: 91, costPerHectare: 5900000, revenuePerTon: 99000 },
            { name: "Zarya", waterNeed: "medium", waterAmount: 6600, yield: "medium", yieldAmount: 59, type: "international", pestResistance: "medium", pestResistancePercent: 62, growthPeriod: "early", growthDays: 165, fertilizerNeed: "medium", fertilizerAmount: 200, soilType: "sandy", soilPh: "neutral", altitude: "medium", altitudeRange: 1200, temperature: "medium", tempRange: 19, climate: "temperate", plantingTime: "بهار", successRate: 88, costPerHectare: 5200000, revenuePerTon: 93000 },
            { name: "Maral", waterNeed: "high", waterAmount: 9100, yield: "high", yieldAmount: 71, type: "improved", pestResistance: "high", pestResistancePercent: 81, growthPeriod: "late", growthDays: 195, fertilizerNeed: "high", fertilizerAmount: 260, soilType: "loam", soilPh: "neutral", altitude: "low", altitudeRange: 400, temperature: "high", tempRange: 23, climate: "warm", plantingTime: "بهار", successRate: 92, costPerHectare: 6100000, revenuePerTon: 101000 },
            { name: "Tara", waterNeed: "medium", waterAmount: 6700, yield: "medium", yieldAmount: 61, type: "improved", pestResistance: "medium", pestResistancePercent: 66, growthPeriod: "early", growthDays: 160, fertilizerNeed: "medium", fertilizerAmount: 210, soilType: "sandy", soilPh: "neutral", altitude: "medium", altitudeRange: 1300, temperature: "medium", tempRange: 18, climate: "temperate", plantingTime: "بهار", successRate: 89, costPerHectare: 5300000, revenuePerTon: 95000 },
            { name: "Sina", waterNeed: "high", waterAmount: 8700, yield: "high", yieldAmount: 68, type: "local", pestResistance: "high", pestResistancePercent: 79, growthPeriod: "late", growthDays: 190, fertilizerNeed: "high", fertilizerAmount: 250, soilType: "loam", soilPh: "neutral", altitude: "low", altitudeRange: 500, temperature: "high", tempRange: 22, climate: "warm", plantingTime: "بهار", successRate: 91, costPerHectare: 5800000, revenuePerTon: 98000 },
            { name: "Vega", waterNeed: "medium", waterAmount: 6500, yield: "medium", yieldAmount: 58, type: "international", pestResistance: "medium", pestResistancePercent: 60, growthPeriod: "early", growthDays: 165, fertilizerNeed: "medium", fertilizerAmount: 190, soilType: "sandy", soilPh: "neutral", altitude: "medium", altitudeRange: 1100, temperature: "medium", tempRange: 19, climate: "temperate", plantingTime: "بهار", successRate: 87, costPerHectare: 5200000, revenuePerTon: 92000 },
            { name: "Aras", waterNeed: "high", waterAmount: 9000, yield: "high", yieldAmount: 70, type: "improved", pestResistance: "high", pestResistancePercent: 80, growthPeriod: "late", growthDays: 190, fertilizerNeed: "high", fertilizerAmount: 250, soilType: "loam", soilPh: "neutral", altitude: "low", altitudeRange: 500, temperature: "high", tempRange: 22, climate: "warm", plantingTime: "بهار", successRate: 92, costPerHectare: 6000000, revenuePerTon: 100000 },
            { name: "Lida", waterNeed: "medium", waterAmount: 6800, yield: "medium", yieldAmount: 62, type: "improved", pestResistance: "medium", pestResistancePercent: 68, growthPeriod: "early", growthDays: 160, fertilizerNeed: "medium", fertilizerAmount: 210, soilType: "sandy", soilPh: "neutral", altitude: "medium", altitudeRange: 1300, temperature: "medium", tempRange: 18, climate: "temperate", plantingTime: "بهار", successRate: 89, costPerHectare: 5400000, revenuePerTon: 96000 },
            { name: "Kaveh", waterNeed: "high", waterAmount: 8800, yield: "high", yieldAmount: 69, type: "local", pestResistance: "high", pestResistancePercent: 80, growthPeriod: "late", growthDays: 190, fertilizerNeed: "high", fertilizerAmount: 250, soilType: "loam", soilPh: "neutral", altitude: "low", altitudeRange: 500, temperature: "high", tempRange: 22, climate: "warm", plantingTime: "بهار", successRate: 91, costPerHectare: 5900000, revenuePerTon: 99000 },
            { name: "Nora", waterNeed: "medium", waterAmount: 6600, yield: "medium", yieldAmount: 59, type: "international", pestResistance: "medium", pestResistancePercent: 62, growthPeriod: "early", growthDays: 165, fertilizerNeed: "medium", fertilizerAmount: 200, soilType: "sandy", soilPh: "neutral", altitude: "medium", altitudeRange: 1200, temperature: "medium", tempRange: 19, climate: "temperate", plantingTime: "بهار", successRate: 88, costPerHectare: 5200000, revenuePerTon: 93000 },
            { name: "Titan", waterNeed: "high", waterAmount: 9100, yield: "high", yieldAmount: 71, type: "improved", pestResistance: "high", pestResistancePercent: 81, growthPeriod: "late", growthDays: 195, fertilizerNeed: "high", fertilizerAmount: 260, soilType: "loam", soilPh: "neutral", altitude: "low", altitudeRange: 400, temperature: "high", tempRange: 23, climate: "warm", plantingTime: "بهار", successRate: 92, costPerHectare: 6100000, revenuePerTon: 101000 },
            { name: "Rima", waterNeed: "medium", waterAmount: 6700, yield: "medium", yieldAmount: 61, type: "improved", pestResistance: "medium", pestResistancePercent: 66, growthPeriod: "early", growthDays: 160, fertilizerNeed: "medium", fertilizerAmount: 210, soilType: "sandy", soilPh: "neutral", altitude: "medium", altitudeRange: 1300, temperature: "medium", tempRange: 18, climate: "temperate", plantingTime: "بهار", successRate: 89, costPerHectare: 5300000, revenuePerTon: 95000 },
            { name: "Homa", waterNeed: "high", waterAmount: 8700, yield: "high", yieldAmount: 68, type: "local", pestResistance: "high", pestResistancePercent: 79, growthPeriod: "late", growthDays: 190, fertilizerNeed: "high", fertilizerAmount: 250, soilType: "loam", soilPh: "neutral", altitude: "low", altitudeRange: 500, temperature: "high", tempRange: 22, climate: "warm", plantingTime: "بهار", successRate: 91, costPerHectare: 5800000, revenuePerTon: 98000 },
            { name: "Elnaz", waterNeed: "medium", waterAmount: 6500, yield: "medium", yieldAmount: 58, type: "international", pestResistance: "medium", pestResistancePercent: 60, growthPeriod: "early", growthDays: 165, fertilizerNeed: "medium", fertilizerAmount: 190, soilType: "sandy", soilPh: "neutral", altitude: "medium", altitudeRange: 1100, temperature: "medium", tempRange: 19, climate: "temperate", plantingTime: "بهار", successRate: 87, costPerHectare: 5200000, revenuePerTon: 92000 },
        ];

        let filteredVarieties = [...beetVarieties];
        let yieldChartInstance, typeChartInstance, radarChartInstance;
        let db;

        // مقداردهی اولیه منوی آموزشی
        function initEducationVariety() {
            const select = document.getElementById('educationVariety');
            beetVarieties.forEach(v => {
                const option = document.createElement('option');
                option.value = v.name;
                option.textContent = v.name;
                select.appendChild(option);
            });
        }

        // نمایش اولیه ارقام
        displayResults(filteredVarieties);
        initEducationVariety();

        // تابع نمایش نتایج
        function displayResults(varieties) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '';
            varieties.forEach(variety => {
                const card = document.createElement('div');
                card.className = 'card';
                card.onclick = () => showVarietyDetails(variety);
                card.innerHTML = `
                    <i class="fas fa-seedling"></i>
                    <div>
                        <strong>${variety.name}</strong><br>
                        نیاز آبی: ${variety.waterNeed === 'low' ? 'کم' : variety.waterNeed === 'medium' ? 'متوسط' : 'زیاد'} (${variety.waterAmount} مترمکعب/هکتار)<br>
                        محصول: ${variety.yield === 'low' ? 'کم' : variety.yield === 'medium' ? 'متوسط' : 'زیاد'} (${variety.yieldAmount} تن/هکتار)<br>
                        نوع: ${variety.type === 'local' ? 'بومی' : variety.type === 'improved' ? 'اصلاح‌شده' : 'بین‌المللی'}<br>
                        مقاومت به آفات: ${variety.pestResistance === 'low' ? 'کم' : variety.pestResistance === 'medium' ? 'متوسط' : 'بالا'} (${variety.pestResistancePercent}%)
                    </div>
                `;
                resultsDiv.appendChild(card);
            });
        }

        // نمایش جزئیات رقم در مودال
        function showVarietyDetails(variety) {
            const modal = document.getElementById('varietyModal');
            const modalContent = document.getElementById('modalContent');
            const profit = (variety.yieldAmount * variety.revenuePerTon - variety.costPerHectare) / 1000000;
            const risk = 100 - variety.successRate;
            modalContent.innerHTML = `
                <h3>${variety.name}</h3>
                <p><strong>نیاز آبی:</strong> ${variety.waterNeed === 'low' ? 'کم' : variety.waterNeed === 'medium' ? 'متوسط' : 'زیاد'} (${variety.waterAmount} مترمکعب/هکتار)</p>
                <p><strong>محصول در هکتار:</strong> ${variety.yield === 'low' ? 'کم' : variety.yield === 'medium' ? 'متوسط' : 'زیاد'} (${variety.yieldAmount} تن)</p>
                <p><strong>نوع رقم:</strong> ${variety.type === 'local' ? 'بومی' : variety.type === 'improved' ? 'اصلاح‌شده' : 'بین‌المللی'}</p>
                <p><strong>مقاومت به آفات:</strong> ${variety.pestResistance === 'low' ? 'کم' : variety.pestResistance === 'medium' ? 'متوسط' : 'بالا'} (${variety.pestResistancePercent}%)</p>
                <p><strong>دوره رشد:</strong> ${variety.growthPeriod === 'early' ? 'زودرس' : 'دیررس'} (${variety.growthDays} روز)</p>
                <p><strong>نیاز کودی:</strong> ${variety.fertilizerNeed === 'low' ? 'کم' : variety.fertilizerNeed === 'medium' ? 'متوسط' : 'زیاد'} (${variety.fertilizerAmount} کیلوگرم/هکتار)</p>
                <p><strong>نوع خاک:</strong> ${variety.soilType === 'sandy' ? 'شنی' : variety.soilType === 'loam' ? 'لومی' : 'رسی'}</p>
                <p><strong>pH خاک:</strong> ${variety.soilPh === 'neutral' ? 'خنثی' : 'قلیایی'}</p>
                <p><strong>ارتفاع مناسب:</strong> ${variety.altitude === 'low' ? 'کم' : variety.altitude === 'medium' ? 'متوسط' : 'زیاد'} (${variety.altitudeRange} متر)</p>
                <p><strong>دمای مطلوب:</strong> ${variety.temperature === 'medium' ? 'متوسط' : 'بالا'} (${variety.tempRange} درجه سانتی‌گراد)</p>
                <p><strong>اقلیم:</strong> ${variety.climate === 'temperate' ? 'معتدل' : 'گرم'}</p>
                <p><strong>زمان کاشت:</strong> ${variety.plantingTime}</p>
                <p><strong>درصد موفقیت:</strong> ${variety.successRate}%</p>
                <p><strong>هزینه کشت:</strong> ${variety.costPerHectare.toLocaleString()} تومان/هکتار</p>
                <p><strong>درآمد هر تن:</strong> ${variety.revenuePerTon.toLocaleString()} تومان</p>
                <p><strong>سود تخمینی:</strong> ${profit.toFixed(2)} میلیون تومان/هکتار</p>
                <p><strong>ریسک شکست:</strong> ${risk}% (عمدتاً به دلیل ${risk > 20 ? 'کمبود آب یا آفات' : 'شرایط محیطی'})</p>
                <p><strong>تحلیل:</strong> این رقم برای ${variety.climate === 'temperate' ? 'مناطق معتدل' : 'مناطق گرم'} با خاک ${variety.soilType === 'sandy' ? 'شنی' : variety.soilType === 'loam' ? 'لومی' : 'رسی'} مناسب است. بازده مالی آن ${profit > 1.5 ? 'بالا' : profit > 0.5 ? 'متوسط' : 'پایین'} است.</p>
            `;
            modal.style.display = 'flex';
        }

        // بستن مودال
        function closeModal() {
            document.getElementById('varietyModal').style.display = 'none';
        }

        // تابع فیلتر کردن
        function filterBeet() {
            const waterNeed = document.getElementById('waterNeed').value;
            const yield = document.getElementById('yield').value;
            const type = document.getElementById('type').value;
            const pestResistance = document.getElementById('pestResistance').value;
            const growthPeriod = document.getElementById('growthPeriod').value;
            const climate = document.getElementById('climate').value;
            const soilPh = document.getElementById('soilPh').value;
            const altitude = document.getElementById('altitude').value;
            const temperature = document.getElementById('temperature').value;

            filteredVarieties = beetVarieties.filter(variety => {
                return (!waterNeed || variety.waterNeed === waterNeed) &&
                       (!yield || variety.yield === yield) &&
                       (!type || variety.type === type) &&
                       (!pestResistance || variety.pestResistance === pestResistance) &&
                       (!growthPeriod || variety.growthPeriod === growthPeriod) &&
                       (!climate || variety.climate === climate) &&
                       (!soilPh || variety.soilPh === soilPh) &&
                       (!altitude || variety.altitude === altitude) &&
                       (!temperature || variety.temperature === temperature);
            });

            displayResults(filteredVarieties);
            updateCharts();
            saveFilters();
        }

        // ذخیره فیلترها در IndexedDB
        function initIndexedDB() {
            const request = indexedDB.open('BeetYarDB', 1);
            request.onupgradeneeded = event => {
                db = event.target.result;
                db.createObjectStore('filters', { keyPath: 'id' });
            };
            request.onsuccess = event => {
                db = event.target.result;
                loadFilters();
            };
        }

        function saveFilters() {
            const filters = {
                id: 'current',
                waterNeed: document.getElementById('waterNeed').value,
                yield: document.getElementById('yield').value,
                type: document.getElementById('type').value,
                pestResistance: document.getElementById('pestResistance').value,
                growthPeriod: document.getElementById('growthPeriod').value,
                climate: document.getElementById('climate').value,
                soilPh: document.getElementById('soilPh').value,
                altitude: document.getElementById('altitude').value,
                temperature: document.getElementById('temperature').value
            };
            const tx = db.transaction(['filters'], 'readwrite');
            tx.objectStore('filters').put(filters);
        }

        function loadFilters() {
            const tx = db.transaction(['filters'], 'readonly');
            const request = tx.objectStore('filters').get('current');
            request.onsuccess = event => {
                const filters = event.target.result;
                if (filters) {
                    document.getElementById('waterNeed').value = filters.waterNeed || '';
                    document.getElementById('yield').value = filters.yield || '';
                    document.getElementById('type').value = filters.type || '';
                    document.getElementById('pestResistance').value = filters.pestResistance || '';
                    document.getElementById('growthPeriod').value = filters.growthPeriod || '';
                    document.getElementById('climate').value = filters.climate || '';
                    document.getElementById('soilPh').value = filters.soilPh || '';
                    document.getElementById('altitude').value = filters.altitude || '';
                    document.getElementById('temperature').value = filters.temperature || '';
                    filterBeet();
                }
            };
        }

        // ریست فیلترها
        function resetFilters() {
            document.getElementById('waterNeed').value = '';
            document.getElementById('yield').value = '';
            document.getElementById('type').value = '';
            document.getElementById('pestResistance').value = '';
            document.getElementById('growthPeriod').value = '';
            document.getElementById('climate').value = '';
            document.getElementById('soilPh').value = '';
            document.getElementById('altitude').value = '';
            document.getElementById('temperature').value = '';
            filteredVarieties = [...beetVarieties];
            displayResults(filteredVarieties);
            updateCharts();
            const tx = db.transaction(['filters'], 'readwrite');
            tx.objectStore('filters').delete('current');
        }

        // به‌روزرسانی نمودارها
        function updateCharts() {
            updateYieldChart();
            updateTypeChart();
            updateRadarChart();
        }

        // نمودار میله‌ای (محصول در هکتار)
        function updateYieldChart() {
            const ctx = document.getElementById('yieldChart').getContext('2d');
            if (yieldChartInstance) yieldChartInstance.destroy();

            const labels = filteredVarieties.map(v => v.name);
            const data = filteredVarieties.map(v => v.yieldAmount);

            yieldChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'محصول در هکتار (تن)',
                        data: data,
                        backgroundColor: '#00f0ff',
                        borderColor: '#d400ff',
                        borderWidth: 1
                    }]
                },
                options: {
                    plugins: {
                        zoom: {
                            zoom: {
                                wheel: { enabled: true },
                                pinch: { enabled: true },
                                mode: 'xy'
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'محصول (تن در هکتار)', color: '#e0e0ff' },
                            ticks: { color: '#e0e0ff' },
                            grid: { color: 'rgba(0, 240, 255, 0.2)' }
                        },
                        x: {
                            ticks: { color: '#e0e0ff' },
                            grid: { color: 'rgba(0, 240, 255, 0.2)' }
                        }
                    }
                }
            });
        }

        // نمودار دایره‌ای (توزیع انواع)
        function updateTypeChart() {
            const ctx = document.getElementById('typeChart').getContext('2d');
            if (typeChartInstance) typeChartInstance.destroy();

            const typeCounts = filteredVarieties.reduce((acc, v) => {
                acc[v.type] = (acc[v.type] || 0) + 1;
                return acc;
            }, {});
            const labels = Object.keys(typeCounts).map(t => t === 'local' ? 'بومی' : t === 'improved' ? 'اصلاح‌شده' : 'بین‌المللی');
            const data = Object.values(typeCounts);

            typeChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: ['#00f0ff', '#d400ff', '#ff66ff']
                    }]
                },
                options: {
                    plugins: {
                        legend: { position: 'top', labels: { color: '#e0e0ff', font: { family: 'Orbitron' } } }
                    }
                }
            });
        }

        // نمودار راداری
        function updateRadarChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            if (radarChartInstance) radarChartInstance.destroy();

            const datasets = filteredVarieties.slice(0, 5).map(v => ({
                label: v.name,
                data: [
                    v.waterAmount / 1000,
                    v.yieldAmount / 10,
                    v.pestResistancePercent / 20
                ],
                backgroundColor: `rgba(${Math.random()*255}, ${Math.random()*255}, ${Math.random()*255}, 0.2)`,
                borderColor: '#00f0ff',
                borderWidth: 1
            }));

            radarChartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['نیاز آبی (هزار مترمکعب)', 'محصول (تن/10)', 'مقاومت به آفات (%)'],
                    datasets: datasets
                },
                options: {
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 10,
                            ticks: { color: '#e0e0ff' },
                            grid: { color: 'rgba(0, 240, 255, 0.2)' },
                            angleLines: { color: 'rgba(0, 240, 255, 0.2)' }
                        }
                    },
                    plugins: {
                        legend: { labels: { color: '#e0e0ff', font: { family: 'Orbitron' } } }
                    }
                }
            });
        }

        // نمایش/مخفی کردن نمودار
        function toggleChart(chartId) {
            const chart = document.getElementById(chartId);
            chart.style.display = chart.style.display === 'block' ? 'none' : 'block';
        }

        // نمایش همه نمودارها
        function showAllCharts() {
            document.getElementById('yieldChart').style.display = 'block';
            document.getElementById('typeChart').style.display = 'block';
            document.getElementById('radarChart').style.display = 'block';
        }

        // مشاوره هوشمند
        document.getElementById('consultationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const soilType = document.getElementById('soilType').value;
            const soilPh = parseFloat(document.getElementById('soilPhInput').value) || 7;
            const waterAvailability = document.getElementById('waterAvailability').value;
            const region = document.getElementById('region').value;
            const budget = parseInt(document.getElementById('budget').value) || 0;
            const climate = document.getElementById('consultationClimate').value;
            const altitude = parseInt(document.getElementById('altitudeInput').value) || 500;
            const temperature = parseInt(document.getElementById('temperatureInput').value) || 20;

            const recommendations = beetVarieties
                .map(v => {
                    let score = 0;
                    // وزن‌دهی معیارها
                    if (v.soilType === soilType) score += 30;
                    if (Math.abs(v.soilPh === 'neutral' ? 7 : 8 - soilPh) < 0.5) score += 20;
                    if ((waterAvailability === 'dry' && v.waterNeed === 'low') || (waterAvailability === 'irrigated' && v.waterNeed !== 'low')) score += 25;
                    if (v.climate === climate) score += 25;
                    if (Math.abs(v.altitudeRange - altitude) < 500) score += 15;
                    if (Math.abs(v.tempRange - temperature) < 3) score += 15;
                    if (v.fertilizerNeed === 'medium' && budget >= 5000000 && budget < 5500000) score += 10;
                    if (v.fertilizerNeed === 'high' && budget >= 5500000) score += 10;

                    // تحلیل ریسک
                    let risk = 100 - v.successRate;
                    if (waterAvailability === 'dry' && v.waterNeed !== 'low') risk += 10;
                    if (Math.abs(v.tempRange - temperature) > 5) risk += 5;
                    if (Math.abs(v.altitudeRange - altitude) > 500) risk += 5;

                    return { ...v, score, risk };
                })
                .sort((a, b) => b.score - a.score)
                .slice(0, 3);

            const resultDiv = document.getElementById('consultationResult');
            resultDiv.innerHTML = '<h3>ارقام پیشنهادی:</h3>' + recommendations.map(v => `
                <p><strong>${v.name}</strong>: امتیاز ${v.score}/150<br>
                مناسب برای خاک ${v.soilType === 'sandy' ? 'شنی' : v.soilType === 'loam' ? 'لومی' : 'رسی'}، 
                نیاز آبی ${v.waterNeed === 'low' ? 'کم' : v.waterNeed === 'medium' ? 'متوسط' : 'زیاد'} (${v.waterAmount} مترمکعب)، 
                اقلیم ${v.climate === 'temperate' ? 'معتدل' : 'گرم'}، 
                ریسک شکست: ${v.risk}% (عمدتاً به دلیل ${v.risk > 20 ? 'کمبود آب یا دمای نامناسب' : 'شرایط محیطی'})</p>
            `).join('');
        });

        // دانلود گزارش PDF
        function downloadReport() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.setFont('Amiri', 'normal');
            doc.setFontSize(12);
            doc.text('گزارش ارقام چغندر قند - چغندر‌یار', 100, 10, { align: 'center' });
            let y = 20;
            filteredVarieties.forEach(v => {
                doc.text(`${v.name}: محصول: ${v.yieldAmount} تن/هکتار، هزینه: ${v.costPerHectare.toLocaleString()} تومان، ریسک: ${100 - v.successRate}%`, 10, y);
                y += 10;
                if (y > 280) {
                    doc.addPage();
                    y = 10;
                }
            });
            doc.save('beet_report.pdf');
        }

        // نمایش نکات آموزشی
        function showEducation() {
            const varietyName = document.getElementById('educationVariety').value;
            const variety = beetVarieties.find(v => v.name === varietyName) || {};
            const content = variety.name ? `
                <h3>نکات کشت برای ${variety.name}</h3>
                <ul>
                    <li>خاک مناسب: ${variety.soilType === 'sandy' ? 'شنی' : variety.soilType === 'loam' ? 'لومی' : 'رسی'} با pH ${variety.soilPh === 'neutral' ? 'خنثی' : 'قلیایی'}</li>
                    <li>نیاز آبی: ${variety.waterAmount} مترمکعب/هکتار - ${variety.waterNeed === 'low' ? 'مناسب برای دیم' : 'نیاز به آبیاری منظم'}</li>
                    <li>کوددهی: ${variety.fertilizerAmount} کیلوگرم/هکتار، ترجیحاً نیتروژن و فسفر</li>
                    <li>اقلیم: ${variety.climate === 'temperate' ? 'معتدل' : 'گرم'}، دمای ${variety.tempRange} درجه</li>
                    <li>مدیریت آفات: مقاومت ${variety.pestResistancePercent}%، بررسی منظم برای نماتدها و قارچ‌ها</li>
                    <li>زمان کاشت: ${variety.plantingTime}، دوره رشد ${variety.growthDays} روز</li>
                </ul>
            ` : `
                <h3>نکات کلی کشت چغندر قند</h3>
                <ul>
                    <li>انتخاب رقم مناسب با اقلیم و خاک منطقه حیاتی است.</li>
                    <li>کاشت در بهار برای اکثر ارقام ایران مناسب است.</li>
                    <li>مدیریت آبیاری دقیق برای جلوگیری از پوسیدگی ریشه ضروری است.</li>
                    <li>کودهای نیتروژنه و فسفره عملکرد را افزایش می‌دهند.</li>
                    <li>کنترل آفات مانند نماتدها و قارچ‌ها با ارقام مقاوم آسان‌تر است.</li>
                </ul>
            `;
            document.getElementById('educationContent').innerHTML = content;
        }

        // بارگذاری اولیه
        window.onload = function() {
            initIndexedDB();
            updateCharts();
        };
    </script>
</body>
</html>